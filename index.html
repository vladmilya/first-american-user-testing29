<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Testing Insights Report</title>
    <link rel="stylesheet" href="styles.css">
    <script src="password-protection.js"></script>
</head>
<body>
    <div class="container">
        <header class="report-header">
            <h1>User Testing Insights Report</h1>
            <div class="report-meta">
                <span id="date"></span>
                <span id="participant-count"></span>
            </div>
        </header>

        <nav class="sidebar">
            <h3>Navigation</h3>
            <ul class="nav-menu">
                <li><a href="#executive-summary" class="nav-link active">Executive Summary</a></li>
                <li><a href="#key-findings" class="nav-link">Key Findings</a></li>
                <li><a href="#themes" class="nav-link">Themes & Patterns</a></li>
                <li><a href="#pain-points" class="nav-link">Pain Points</a></li>
                <li><a href="#quotes" class="nav-link">Notable Quotes</a></li>
                <li><a href="#recommendations" class="nav-link">Recommendations</a></li>
                <li><a href="#research-questions" class="nav-link">üìã Discussion Guide (All Questions)</a></li>
                <li><a href="#presentation" class="nav-link">üìä Presentation</a></li>
                <li class="nav-parent">
                    <a href="#" class="nav-link nav-toggle" onclick="toggleSubMenu(event)">
                        üîß Build Report
                        <span class="toggle-icon">‚Ä∫</span>
                    </a>
                    <ul class="sub-menu">
                        <li><a href="#transcripts" class="nav-link sub-nav-link">üìÑ Interview Transcripts</a></li>
                        <li><a href="#upload-videos" class="nav-link sub-nav-link">üé• Upload Videos</a></li>
                    </ul>
                </li>
            </ul>
            
            <div class="search-box">
                <input type="text" id="search" placeholder="Search insights...">
            </div>
        </nav>

        <main class="content">
            <section id="executive-summary" class="section active">
                <h2>Executive Summary</h2>
                <div class="summary-content">
                    <p class="placeholder">Upload your transcript data to generate insights...</p>
                </div>
            </section>

            <section id="key-findings" class="section">
                <h2>Key Findings</h2>
                <div class="findings-grid">
                    <div class="placeholder">Findings will appear here after analysis...</div>
                </div>
            </section>

            <section id="themes" class="section">
                <h2>Themes & Patterns</h2>
                <div class="themes-container">
                    <div class="placeholder">Themes will be identified from your data...</div>
                </div>
            </section>

            <section id="pain-points" class="section">
                <h2>User Pain Points</h2>
                <div class="pain-points-list">
                    <div class="placeholder">Pain points will be extracted...</div>
                </div>
            </section>

            <section id="quotes" class="section">
                <h2>Notable Quotes</h2>
                <div class="quotes-container">
                    <div class="placeholder">Key quotes will be highlighted...</div>
                </div>
            </section>

            <section id="recommendations" class="section">
                <h2>Recommendations</h2>
                <div class="recommendations-list">
                    <div class="placeholder">Actionable recommendations will be generated...</div>
                </div>
            </section>

            <section id="research-questions" class="section">
                <h2>üìã Complete Research Discussion Guide</h2>
                <p style="color: var(--text-light); margin-bottom: 2rem; font-size: 1.125rem;">
                    All detailed questions from the ISS P4.1 Iterative Testing Discussion Guide, organized by feature area, 
                    with synthesized findings from patterns observed across all 6 participants.
                </p>
                <div class="research-questions-list">
                    <div class="placeholder">Loading complete discussion guide with all questions and synthesized answers...</div>
                </div>
            </section>

            <section id="presentation" class="section">
                <div class="presentation-container">
                    <div class="presentation-header">
                        <h2>Presentation Mode</h2>
                        <div class="presentation-controls">
                            <button id="download-pdf" class="download-button">üì• Download PDF</button>
                            <button id="fullscreen-btn" class="download-button">‚õ∂ Fullscreen</button>
                        </div>
                    </div>
                    
                    <div class="slideshow-container" id="slideshow">
                        <!-- Slides will be generated here -->
                    </div>
                    
                    <div class="slide-navigation">
                        <button class="nav-button" id="prev-slide">‚Äπ Previous</button>
                        <span class="slide-counter" id="slide-counter">1 / 1</span>
                        <button class="nav-button" id="next-slide">Next ‚Ä∫</button>
                    </div>
                </div>
            </section>

            <section id="transcripts" class="section">
                <h2>üìÑ Interview Transcripts</h2>
                <p style="color: var(--text-light); margin-bottom: 2rem; font-size: 1.125rem;">
                    Upload and manage your research questions and participant interview transcripts. The system will automatically process and synthesize the data into actionable insights.
                </p>
                
                <div class="upload-section">
                    <div class="upload-card">
                        <h3>üìã Research Questions</h3>
                        <p style="color: var(--text-light); margin-bottom: 1rem;">Upload a PDF or DOC file containing your research questions</p>
                        <input type="file" id="questions-file" accept=".pdf,.doc,.docx,.txt" style="display: none;">
                        <button class="upload-button" onclick="document.getElementById('questions-file').click()">
                            üìÑ Upload Research Questions File
                        </button>
                        <div id="questions-status" class="upload-status"></div>
                        <div class="divider">OR</div>
                        <textarea id="questions-input" placeholder="Paste research questions here (one per line)...&#10;&#10;Example:&#10;What problems are users trying to solve?&#10;What features do they find most valuable?&#10;Where do they get stuck?"></textarea>
                    </div>

                    <div class="upload-card">
                        <h3>üìù Transcript Data</h3>
                        <p style="color: var(--text-light); margin-bottom: 1rem;">Upload PDF or DOC files containing interview transcripts</p>
                        <input type="file" id="transcript-files" accept=".pdf,.doc,.docx,.txt" multiple style="display: none;">
                        <button class="upload-button" onclick="document.getElementById('transcript-files').click()">
                            üìÑ Upload Transcript Files (Multiple)
                        </button>
                        <div id="transcript-status" class="upload-status"></div>
                        <div class="divider">OR</div>
                        <textarea id="transcript-input" placeholder="Paste transcript data here..."></textarea>
                    </div>
                </div>

                <div style="text-align: center; margin: 2rem 0;">
                    <button id="analyze-btn" class="analyze-button" style="font-size: 1.125rem; padding: 1.25rem 3rem;">
                        üîç Analyze & Generate Report
                    </button>
                </div>

                <div class="info-box">
                    <h4>‚ÑπÔ∏è How it works:</h4>
                    <ol style="margin-left: 1.5rem; margin-top: 0.5rem;">
                        <li>Upload your research questions file (or paste text)</li>
                        <li>Upload one or more transcript files (or paste text)</li>
                        <li>Click "Analyze & Generate Report"</li>
                        <li>The system will extract text, identify themes, pain points, and quotes</li>
                        <li>Navigate to other sections to see the results!</li>
                    </ol>
                    <p style="margin-top: 1rem; color: var(--text-light);"><strong>Supported formats:</strong> PDF, DOC, DOCX, TXT</p>
                </div>

                <div class="transcripts-display"></div>
            </section>

            <section id="upload-videos" class="section">
                <h2>üé• Upload Videos</h2>
                <p style="color: var(--text-light); margin-bottom: 2rem; font-size: 1.125rem;">
                    Upload user testing session videos for behavioral analysis and synthesis. Each video can be labeled with participant information for organized insights.
                </p>

                <div class="video-upload-container">
                    <!-- Upload Control -->
                    <div class="upload-card">
                        <h3>üìπ Add Video Recording</h3>
                        <p style="color: var(--text-light); margin-bottom: 1rem;">Upload user testing session videos (MP4, WebM, MOV)</p>
                        <input type="file" id="video-file-input" accept="video/mp4,video/webm,video/quicktime,video/x-msvideo" style="display: none;">
                        <button class="upload-button" onclick="document.getElementById('video-file-input').click()">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M23 7l-7 5 7 5V7z"></path>
                                <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                            </svg>
                            Select Video File
                        </button>
                        <div id="video-upload-status" class="upload-status"></div>
                    </div>

                    <!-- Video List -->
                    <div class="uploaded-videos-section">
                        <h3>üìã Uploaded Videos (<span id="video-count">0</span>/12)</h3>
                        <div id="video-list" class="video-list">
                            <div class="empty-state">
                                <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="color: var(--text-light); margin-bottom: 1rem;">
                                    <path d="M23 7l-7 5 7 5V7z"></path>
                                    <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                                </svg>
                                <p style="color: var(--text-light);">No videos uploaded yet. Add your first video above.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Presentation Upload Section -->
                    <div class="presentation-upload-section">
                        <h3>üìä Upload Presentation Examples</h3>
                        <p style="color: var(--text-light); margin-bottom: 1.5rem;">
                            Submit presentation examples to help the AI learn effective presentation styles and formatting.
                        </p>

                        <!-- Guidelines -->
                        <div class="guidelines-section">
                            <h4>üìã Upload Guidelines</h4>
                            <p style="color: var(--text-light); font-size: 0.95rem; line-height: 1.7; margin-bottom: 1rem;">
                                Good presentation examples should demonstrate:
                            </p>
                            <ul class="guidelines-list">
                                <li>Clear data visualization and charts</li>
                                <li>Well-organized information hierarchy</li>
                                <li>Consistent formatting and styling</li>
                                <li>Effective use of whitespace</li>
                                <li>Professional color schemes</li>
                                <li>Actionable insights and recommendations</li>
                            </ul>
                        </div>

                        <!-- Upload Interface -->
                        <div class="upload-presentations-card">
                            <input type="file" id="presentation-files-input" accept=".xls,.xlsx,.doc,.docx,.pdf" multiple style="display: none;">
                            <button class="upload-button" onclick="document.getElementById('presentation-files-input').click()">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                    <polyline points="17 8 12 3 7 8"></polyline>
                                    <line x1="12" y1="3" x2="12" y2="15"></line>
                                </svg>
                                Upload Presentation Example
                            </button>
                            <p style="color: var(--text-light); font-size: 0.875rem; margin-top: 0.5rem;">
                                Supported formats: Excel (.xls, .xlsx), Word (.doc, .docx), PDF (.pdf)
                            </p>
                        </div>

                        <!-- Uploaded Presentations List -->
                        <div id="presentations-list" class="presentations-list" style="display: none;">
                            <h4>üìÅ Uploaded Examples (<span id="presentation-count">0</span>)</h4>
                            <div id="presentation-items"></div>
                        </div>

                        <!-- Submit Section -->
                        <div class="submit-section" style="display: none;" id="submit-section">
                            <button class="submit-button" id="submit-presentations-btn">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 0.5rem;">
                                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                    <polyline points="22 4 12 14.01 9 11.01"></polyline>
                                </svg>
                                Submit All Presentations
                            </button>
                            <div id="submission-feedback" class="submission-feedback"></div>
                        </div>

                        <!-- FAQ Section -->
                        <div class="faq-section">
                            <div class="faq-header" onclick="toggleFAQ()">
                                <h4>‚ùì Frequently Asked Questions</h4>
                                <span class="faq-toggle-icon">‚Ä∫</span>
                            </div>
                            <div class="faq-content">
                                <div class="faq-item">
                                    <strong>Q: What file formats are supported?</strong>
                                    <p>A: We support Excel (.xls, .xlsx), Word (.doc, .docx), and PDF (.pdf) files.</p>
                                </div>
                                <div class="faq-item">
                                    <strong>Q: How many files can I upload at once?</strong>
                                    <p>A: You can upload multiple files simultaneously. There's no strict limit, but we recommend uploading 3-5 high-quality examples.</p>
                                </div>
                                <div class="faq-item">
                                    <strong>Q: What makes a good presentation example?</strong>
                                    <p>A: Good examples have clear data visualization, consistent formatting, professional styling, and actionable insights.</p>
                                </div>
                                <div class="faq-item">
                                    <strong>Q: Can I edit the title or description after uploading?</strong>
                                    <p>A: Yes, you can edit the title and description at any time before submitting.</p>
                                </div>
                                <div class="faq-item">
                                    <strong>Q: What happens after I submit?</strong>
                                    <p>A: The AI will analyze your examples to learn effective presentation patterns, styles, and formatting techniques.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Original Analysis Button -->
                        <div style="margin-top: 2rem; padding-top: 2rem; border-top: 2px solid var(--border);">
                            <h4 style="margin-bottom: 1rem;">üé• Video Analysis</h4>
                            <textarea id="bot-instructions" class="bot-instructions-textarea" placeholder="Add custom analysis instructions for videos here..."></textarea>
                            <button class="analyze-button" id="analyze-videos-btn" disabled>
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 0.5rem;">
                                    <path d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                                </svg>
                                Analyze Videos & Generate Insights
                            </button>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- PDF.js Library for PDF parsing -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    
    <!-- Chart.js for vector charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.js"></script>
    
    <!-- html2pdf for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    
    <script src="synthesis-data.js"></script>
    <script src="script.js"></script>
    <script src="file-upload.js"></script>
    <script src="presentation.js"></script>
    <script>
        // Force load data after page is ready
        window.addEventListener('load', function() {
            console.log('Page fully loaded');
            console.log('synthesisData exists?', typeof synthesisData !== 'undefined');
            if (typeof synthesisData !== 'undefined' && synthesisData) {
                console.log('Attempting to load data...');
                setTimeout(function() {
                    loadSampleData();
                }, 100);
            } else {
                console.error('synthesisData not found!');
            }
        });
    </script>
</body>
</html>
